\section{Cubic Subspace Instance Construction}
\frame{\tableofcontents[currentsection]}


\begin{frame}
    \frametitle{Plane and Point Generation}
    \begin{figure}[ht]
        \begin{minipage}{0.5\textwidth}
            \textbf{Plane Generation:}
            \begin{itemize}
                \onslide<1->{
                \item generate 3 planes\\
                as distinct normal vectors $\vec{n}_1, \vec{n}_2, \vec{n}_3$ (normalized)
                }
                \onslide<2->{
                \item compute a $\vec{r}_{i,1}$ (normalized) orthogonal to $\vec{n}_i$
                ($i \in \{1,2,3\}$)
                }
                \onslide<3->{
                \item compute the $\vec{r}_{i,2}$ (normalized) orthogonal to $\vec{n}_i$ and $\vec{r}_{i,1}$
                }
            \end{itemize}
        \end{minipage}
        \begin{minipage}{0.48\textwidth}
            \includegraphics[width=\textwidth]{generated-points.png}
        \end{minipage}
    \end{figure}
    \onslide<4->{
    \textbf{Point Generation} on the plane $(\vec{n},\vec{r}_1,\vec{r}_2)$, parameters $(\maxD,\noise)$:
    \begin{itemize}
        \item random variables $k_1,k_2 \in [-\maxD,\maxD]$ (uniform distribution)
        \item random variable $k_n$ (normal distribution based on $\noise$) 
        \item generate point $p = k_1\vec{r_1} + k_2\vec{r_2} + k_n\vec{n}$ 
    \end{itemize}
    }
\end{frame}


\begin{frame}
    \frametitle{Cost Function (1)}
    % cost function explain what works, what not and why do we need this conditions
    % cost function ~7min with pictures, explain ideas
    % My contribution!!! 
    % Cost function does not depend on the point distribution bounds!!!
    % Steps to assign the cost !!!!!
    % 1. skip triangle where 2 points are close to each other
    % (because may be close to the origin, noise effect, unclear plane spanned by the triangle)
    % 2. skip line like triangles
    % (criteria for almost surely not in the same plane)
    % 3. assign penalty if the noise sum is too large
    \begin{minipage}{0.55\textwidth} 
        \textbf{Triangle} $abc \in \binom{\fSet}{3}$
        \begin{enumerate}
            \onslide<2->{
            \item Smallest side $s < \maxD/2$\\
            $\to \cost_{abc} = 0$
            }
            \onslide<3->{
            \item Largest angle $\alpha > 150\degree$\\
            $\to \cost_{abc} = 0$
            }
            \onslide<4->{
            \item $ha,hb,hc$: distances\\
            to the best fitting plane\\
            containing the origin\\
            $ha + hb + hc > 3\noise + \tol$\\
            \vspace{5px}
            $\to \cost_{abc} = \frac{(ha + hb + hc) - (3\noise + \tol)}{3\maxD}$
            }
            \vspace{5px}
            \onslide<5->{
            
            \item $ho$: distance from the origin\\
            to the triangle plane\\
            $ho > \frac{10\noise}{\#points} + \tol$\\
            \vspace{5px}
            $\to \cost_{abc} = 0$
            }
        \end{enumerate}
    \end{minipage}
    \begin{minipage}{0.43\textwidth}
        \centering
        \onslide<2->{
            \begin{tikzpicture}[node distance=30px]
                % nodes
                \node[state, draw=red] (a) {a};
                \node[state, draw=blue] (b) [above right of=a] {b};
                \node[state, draw=blue] (c) [below right of=b] {c};
                \node[state] (o) [above left of=b] {o};
                % edges
                \path[-, ] (a) edge node {} (b);
                \path[-] (b) edge node {} (c);
                \path[-] (c) edge node {} (a);
                \path[-, dashed] (o) edge[red] node {} (a);
                \path[-, dashed] (o) edge[blue] node {} (b);
                
            \end{tikzpicture}
            \hspace{10px}
            \begin{tikzpicture}[node distance=30px]
                % nodes
                \node[state, draw=blue] (a) {a};
                \node[state, draw=blue] (b) [above right of=a, right=10px] {b};
                \node[state, draw=blue] (c) [above right of=a] {c};
                % edges
                \path[-, ] (a) edge node {} (b);
                \path[-] (b) edge node[above] {\small$\noise$} (c);
                \path[-] (c) edge node {} (a);
            \end{tikzpicture}
        }

        \vspace{10px}
        \onslide<3->{
            \begin{tikzpicture}[node distance=30px]
                % nodes
                \node[state, draw=red] (a) {a};
                \node[state, draw=blue] (b) [right of=a, above=7px, right=10px] {b};
                \node[state, draw=blue] (c) [right of=a, right=60px] {c};
                % edges
                \path[-, ] (a) edge node {} (b);
                \path[-] (b) edge node {} (c);
                \path[-] (c) edge node {} (a);
            \end{tikzpicture}
        }

        \vspace{10px}
        \onslide<4->{
            \begin{tikzpicture}[node distance=30px]
                % nodes
                \node[state] (o) {o};
                \node[state, draw=blue] (a1) [right of=o] {a'};
                \node[state, draw=red] (a) [below of=a1, below=10px] {a};
                \node[state, draw=blue] (b1) [right of=o, right=30px] {b'};
                \node[state, draw=blue] (b) [above of=b1, below=3px] {b};
                \node[state, draw=blue] (c1) [right of=o, right=70px] {c'};
                \node[state, draw=blue] (c) [below of=c1, above=10px] {c};
                % edges
                \path[-, dashed] (o) edge[blue] node {} (a1);
                \path[-, dashed] (a1) edge[blue] node {} (b1);
                \path[-, dashed] (b1) edge[blue] node {} (c1);
                \path[-] (a) edge node {} (b);
                \path[-] (b) edge node {} (c);
                \path[-] (c) edge node {} (a);
                \path[-, dotted] (a) edge node[left] {\small ha} (a1);
                \path[-, dotted] (b) edge node[right=6px, below=-6px] {\small hb} (b1);
                \path[-, dotted] (c) edge node[right] {\small hc} (c1);
            \end{tikzpicture}
        }
        
        \vspace{10px}
        \onslide<5->{
            \begin{tikzpicture}[node distance=30px]
                % nodes
                \node[state] (o) {o};
                \node[state, draw=blue] (o1) [below of=o] {o'};
                \node[state, draw=blue] (a) [right of=o1, right=10px] {a};
                \node[state, draw=blue] (b) [right of=o1, right=30px] {b};
                \node[state, draw=blue] (c) [right of=o1, right=60px] {c};
                
                % edges
                \path[-, dashed] (o1) edge[blue] node {} (a);
                \path[-] (a) edge node {} (b);
                \path[-] (b) edge node {} (c);
                \path[-, dotted] (o) edge node[left] {\small ho} (o1);
            \end{tikzpicture}
        }
    \end{minipage}
\end{frame}
    

\begin{frame}
    \frametitle{Cost Function (2)}
        for all points $p$:
            $hp$: distance to the best fitting plane\\
            choose $p$ if $hp < \noise + \tol$ and $|\vec{p}| > 0.3\maxD$\\
            $hp'$: distance to the best fitting plane of all chosen points\\ 
            $\delta_p = \frac{hp' - (\noise + \tol)}{\maxD}$,
            $SAME = \{p \colon \delta_p < 0\}$,
            $rew = \sum\limits_{p \in SAME} \delta_p$,\\
            $|SAME| \leq 3 \to \cost_{abc} = 0$\\
            else $\to \cost_{abc} = 2^{|SAME|-4}rew$
\end{frame}